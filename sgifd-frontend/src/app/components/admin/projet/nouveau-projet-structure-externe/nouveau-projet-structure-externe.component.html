<!-- ============================================================== -->
<!-- Start Page Content -->
<!-- ============================================================== -->
<div class="row">

  <div class="col-md-12 col-sm-12">
    <div class="card">
      <div class="card-body">
        <h4 class="card-title">Formulaire d'enregistrement</h4>
        <h6 class="card-subtitle">Enregistrement des informations sur un projet.</h6>
        <hr>

        <div class="row">
          <div class="col-md-12 col-sm-12">
            <div class="card">
              <div class="card-body">

                <nz-steps [nzCurrent]="current">
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                  <nz-step nzTitle=""></nz-step>
                </nz-steps>

                <div class="steps-content" style="padding: 10px; margin-top: 15px;">

                  <div class="row" *ngIf="current == 0">

                    <div class="col-md-12 col-sm-12">

                      <h5> Identification du projet </h5>
                      <hr>

                      <form class="mt-4" [formGroup]="validateFormProjetIdee_Etape1">

                        <div class="row">
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Catégorie
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="categorieProjet"
                                           [compareWith]="compareFn">
                                  <nz-option *ngFor="let categorieProjet of categorieprojetList"
                                             [nzLabel]="categorieProjet.libelle"
                                             [nzValue]="categorieProjet"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('categorieProjet')?.dirty && validateFormProjetIdee_Etape1.get('categorieProjet')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Année de collecte
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="annee"  [compareWith]="compareFn" >
                                  <nz-option *ngFor="let annee of exerciceList" [nzLabel]="annee.libelle"
                                             [nzValue]="annee"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('annee')?.dirty && validateFormProjetIdee_Etape1.get('annee')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Envergure
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="envergure"
                                           [compareWith]="compareFn">
                                  <nz-option *ngFor="let envergure of envergureList" [nzLabel]="envergure.libelle"
                                             [nzValue]="envergure"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('envergure')?.dirty && validateFormProjetIdee_Etape1.get('envergure')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Niveau de maturité
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="niveaumaturite"
                                           [compareWith]="compareFn">
                                  <nz-option *ngFor="let niveaumaturite of niveaumaturiteList"
                                             [nzLabel]="niveaumaturite.libelle" [nzValue]="niveaumaturite"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('niveaumaturite')?.dirty && validateFormProjetIdee_Etape1.get('niveaumaturite')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-10 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Intitulé
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input formControlName="libelle" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('libelle')?.dirty && validateFormProjetIdee_Etape1.get('libelle')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-2 col-sm-12">
                            <br>
                            <button nz-button nzType="default" (click)="openDialogToSearchDoublon()" style="margin-top: 5px;"
                                    [disabled]="(projetSubmit != null && projetSubmit.id != null && projetSubmit.id > 0)">
                              <i nz-icon nzType="search" nzTheme="outline"></i> <span>Vérifier doublon</span>
                            </button>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Référence
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input formControlName="reference" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()" (blur)="verifierDoublonByReference()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('reference')?.dirty && validateFormProjetIdee_Etape1.get('reference')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                <!--          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Structure de tutelle
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="structureSousTutelle"
                                           [compareWith]="compareFn" (ngModelChange)="reviewListDocprogramAndTypeCooper()">
                                  <nz-option *ngFor="let structureSousTutelle of structureList"
                                             [nzLabel]="structureSousTutelle.denominationStructure"
                                             [nzValue]="structureSousTutelle"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('structureSousTutelle')?.dirty && validateFormProjetIdee_Etape1.get('structureSousTutelle')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>-->
                        </div>
                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Types de coopération
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="typeCooperations"
                                           nzMode="multiple" [compareWith]="compareFn">
                                  <nz-option *ngFor="let typeCooperation of typecooperationList"
                                             [nzLabel]="typeCooperation.libelle"
                                             [nzValue]="typeCooperation"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('typeCooperation')?.dirty && validateFormProjetIdee_Etape1.get('typeCooperation')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Document programmatique
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="documentProgrammatique"
                                           [compareWith]="compareFn">
                                  <nz-option *ngFor="let documentProgram of documentProgrammatiqueList"
                                             [nzLabel]="documentProgram.libelle"
                                             [nzValue]="documentProgram"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('documentProgrammatique')?.dirty && validateFormProjetIdee_Etape1.get('documentProgrammatique')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                        </div>

                      <!--  <div class="row">
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date d'approbation
                                  <span class="text-danger">*</span>
                                </h5>
                                <input type="date" nz-input
                                       formControlName="dateApprobation" class="form-control">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateApprobation')?.dirty && validateFormProjetIdee_Etape1.get('dateApprobation')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de signature de l'accord
                                  <span class="text-danger">*</span>
                                </h5>
                                <input type="date" nz-input
                                       [min]="validateFormProjetIdee_Etape1.get('dateApprobation').value"
                                       formControlName="dateSignatureAccord" class="form-control">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateSignatureAccord')?.dirty && validateFormProjetIdee_Etape1.get('dateSignatureAccord')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de ractification
                                  <span class="text-danger">*</span>
                                </h5>
                                <input type="date" nz-input
                                       [min]="validateFormProjetIdee_Etape1.get('dateSignatureAccord').value"
                                       formControlName="dateRactification" class="form-control">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateRactification')?.dirty && validateFormProjetIdee_Etape1.get('dateRactification')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de mise en vigueur du projet
                                  <span class="text-danger">*</span>
                                </h5>
                                <input type="date" nz-input
                                       [min]="validateFormProjetIdee_Etape1.get('dateRactification').value"
                                       formControlName="dateMiseEnVigueur" class="form-control">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateMiseEnVigueur')?.dirty && validateFormProjetIdee_Etape1.get('dateMiseEnVigueur')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
-->
                        <div class="row">
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de démarrage
                                  <span class="text-danger">*</span>
                                </h5>
                                <input type="date" nz-input (ngModelChange)="makeDateCloturePrevue()"
                                       formControlName="dateDemarrage" class="form-control">
                                <!--<nz-date-picker formControlName="dateDemarrage"
                                                (ngModelChange)="makeDateCloturePrevue()"></nz-date-picker>-->
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateDemarrage')?.dirty && validateFormProjetIdee_Etape1.get('dateDemarrage')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Durée du projet (nbre de mois)
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input type="number" min="0" formControlName="dureeProjet" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()"
                                       (keyup)="validateFormProjetIdee_Etape1.get('dateDemarrage').value != null ? makeDateCloturePrevue() : makeDateDemmaragePrevue()"
                                       (keydown)="validateFormProjetIdee_Etape1.get('dateDemarrage').value != null ? makeDateCloturePrevue() : makeDateDemmaragePrevue()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dureeProjet')?.dirty && validateFormProjetIdee_Etape1.get('dureeProjet')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de clôture prévue
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-date-picker formControlName="dateAchevementPrevue"
                                                (ngModelChange)="makeDateDemmaragePrevue()" nzDisabled></nz-date-picker>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dateAchevementPrevue')?.dirty && validateFormProjetIdee_Etape1.get('dateAchevementPrevue')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Les années concernées
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear nzMode="multiple"
                                           [compareWith]="compareFn" formControlName="dureeAnnees">
                                  <nz-option *ngFor="let annee of exerciceListGenerer" [nzLabel]="annee.libelle"
                                             [nzValue]="annee"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('dureeAnnees')?.dirty && validateFormProjetIdee_Etape1.get('dureeAnnees')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Coût global du projet en francs CFA
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input type="number" min="0" formControlName="coutGlobalProjet"
                                       class="form-control"
                                       (blur)="controlerSommeMontant()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('coutGlobalProjet')?.dirty && validateFormProjetIdee_Etape1.get('coutGlobalProjet')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Types de ressource intérieure
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="typeRessourceInterieures"
                                           nzMode="multiple" [compareWith]="compareFn">
                                  <nz-option *ngFor="let typeRessourceInterieure of typeressourceinterieureList"
                                             [nzLabel]="typeRessourceInterieure.libelle"
                                             [nzValue]="typeRessourceInterieure"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('typeRessourceInterieure')?.dirty && validateFormProjetIdee_Etape1.get('typeRessourceInterieure')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Contrepartie du(es) ressource(s) intérieure(s) en francs CFA
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input type="number" min="0" formControlName="contrePartieNationale"
                                       class="form-control"  (blur)="controlerSommeMontant()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('contrePartieNationale')?.dirty && validateFormProjetIdee_Etape1.get('contrePartieNationale')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Coût total des ressources extérieures des P.T.F en francs CFA
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input type="number" min="0" formControlName="coutTotalRessourcesExterieures"
                                       class="form-control"  (blur)="controlerSommeMontant()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('coutTotalRessourcesExterieures')?.dirty && validateFormProjetIdee_Etape1.get('coutTotalRessourcesExterieures')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Structure ou Agence d'exécution
                                </h5>
                                <nz-select nzShowSearch nzAllowClear nzMode="multiple" [compareWith]="compareFn"
                                           formControlName="structureAgenceExecution">
                                  <nz-option *ngFor="let structureAgenceExecution of structureList"
                                             [nzLabel]="structureAgenceExecution.denominationStructure"
                                             [nzValue]="structureAgenceExecution"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('structureAgenceExecution')?.dirty && validateFormProjetIdee_Etape1.get('structureAgenceExecution')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Cible ODD prioritaire
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear nzMode="multiple" formControlName="cibles"
                                           [compareWith]="compareFn" [nzMaxMultipleCount]="1">
                                  <nz-option *ngFor="let cible of cibleList" [nzLabel]="cible.code+' '+cible.libelle"
                                             [nzValue]="cible" [nzCustomContent]="true">

                                <span class="col-md-6" nz-popover [nzTitle]="cible.code"
                                      [nzContent]="cible.libelle" nzPlacement="topLeft">
                                {{ cible.code+' '+cible.libelle }}
                              </span>

                                  </nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('cibles')?.dirty && validateFormProjetIdee_Etape1.get('cibles')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Axe prioritaire PAG
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear nzMode="multiple" [compareWith]="compareFn"
                                           formControlName="axePrioritaires" [nzMaxMultipleCount]="1">
                                  <nz-option *ngFor="let axeprioritaire of axeprioritaireList"
                                             [nzLabel]="axeprioritaire.code+' '+axeprioritaire.libelle"
                                             [nzValue]="axeprioritaire" [nzCustomContent]="true">

                                <span class="col-md-6" nz-popover [nzTitle]="axeprioritaire.code"
                                      [nzContent]="axeprioritaire.libelle" nzPlacement="topLeft">
                                {{ axeprioritaire.code+' '+axeprioritaire.libelle }}
                              </span>
                                  </nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape1.get('axePrioritaires')?.dirty && validateFormProjetIdee_Etape1.get('axePrioritaires')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                      </form>
                    </div>
                  </div>

                  <div class="row" *ngIf="current == 1">

                    <div class="col-md-12 col-sm-12">

                      <h5> Objectifs et évaluations du projet </h5>
                      <hr>

                      <form class="mt-4" [formGroup]="validateFormProjetIdee_Etape2">
                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Objectif général
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input formControlName="objectifgeneral" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()">
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape2.get('objectifgeneral')?.dirty && validateFormProjetIdee_Etape2.get('objectifgeneral')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Références des marchés</h5>
                                <textarea rows="3" nz-input formControlName="referencesMarche"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>

                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Objectifs spécifiques</h5>
                                <textarea rows="3" nz-input formControlName="objectifs"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Difficultés</h5>
                                <textarea rows="3" nz-input formControlName="difficultes"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>

                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Solution envisagée</h5>
                                <textarea rows="3" nz-input formControlName="solutionEnvisagee"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>

                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Réalisation audit</h5>
                                <textarea rows="3" nz-input formControlName="realisationAudit"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>

                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>

                  <div class="row" *ngIf="current == 2">

                    <div class="col-md-12 col-sm-12">

                      <h5> Secteurs impactés par le projet </h5>
                      <hr>

                      <form class="mt-4" [formGroup]="validateFormProjetIdee_Etape3">
                        <div class="row">
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Grand secteur
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <nz-select formControlName="grandSecteur"
                                           (ngModelChange)="grandSecteurChange(validateFormProjetIdee_Etape3.value.grandSecteur)">
                                  <nz-option *ngFor="let p of grandsecteurList" [nzValue]="p"
                                             [nzLabel]="p.libelle"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape3.get('grandSecteur')?.dirty && validateFormProjetIdee_Etape3.get('grandSecteur')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>

                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Secteur
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <nz-select formControlName="secteur"
                                           (ngModelChange)="secteurChange(validateFormProjetIdee_Etape3.value.secteur)">
                                  <nz-option *ngFor="let p of secteurList" [nzValue]="p"
                                             [nzLabel]="p.libelle"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormProjetIdee_Etape3.get('secteur')?.dirty && validateFormProjetIdee_Etape3.get('secteur')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>

                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Sous Secteur </h5>
                              <nz-form-control>
                                <nz-select formControlName="sousSecteur">
                                  <nz-option *ngFor="let p of soussecteurList" [nzValue]="p"
                                             [nzLabel]="p.libelle"></nz-option>
                                </nz-select>
                              </nz-form-control>

                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <br>
                            <button nz-button nzType="primary" (click)="enregistrerSecteurImpactes()"
                                    [disabled]="validateFormProjetIdee_Etape3.invalid" style="margin-top: 5px;">
                              <i class="anticon anticon-plus"> </i> Ajouter
                            </button>
                          </div>
                        </div>
                      </form>

                      <table class="table table-striped border" style="width: 100%!important;">
                        <thead>
                        <tr>
                          <th>Grand secteur</th>
                          <th>Secteur</th>
                          <th>Sous - secteur</th>
                          <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let data of secteurImpactes let i=index">
                          <td> {{data.grandSecteur != null ? data.grandSecteur.libelle: 'N.A'}}</td>
                          <td> {{data.secteur != null ? data.secteur.libelle: 'N.A'}}</td>
                          <td> {{data.sousSecteur != null ? data.sousSecteur.libelle : 'N.A'}}</td>
                          <td>
                            <div class="editable-row-operations">

                              <ng-container>
                                <nz-popconfirm [nzTitle]="'Êtes vous sûr de supprimer?'"
                                               (nzOnConfirm)="supprimerSecteurImpacte(i, data)" [nzOkText]="'Oui'"
                                               [nzCancelText]="'Non'">

                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>

                                </nz-popconfirm>
                              </ng-container>

                            </div>
                          </td>
                        </tr>
                        <tr *ngIf="secteurImpactes == null || secteurImpactes.length == 0">
                          <td colspan="4" class="text-center">
                            Aucun enregistrement dans la table !
                          </td>
                        </tr>
                        </tbody>
                      </table>

                    </div>
                  </div>

                  <div class="row" *ngIf="current == 3">

                    <div class="col-md-12 col-sm-12">

                      <h5> Spécification des financements exterieures </h5>
                      <hr>

                      <form class="mt-4" [formGroup]="validateFormRessourceExterieure">
                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <h5> Partenaire Technique Financier (P.T.F)
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <nz-select nzShowSearch nzAllowClear formControlName="ptfBailleurFrs">
                                  <nz-option *ngFor="let ptf of ptfList" [nzLabel]="ptf.denominationptf"
                                             [nzValue]="ptf"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormRessourceExterieure.get('ptfBailleurFrs')?.dirty && validateFormRessourceExterieure.get('ptfBailleurFrs')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Type assistance </h5>
                              <nz-form-control>
                                <nz-select nzShowSearch nzAllowClear formControlName="natureAssistance">
                                  <nz-option *ngFor="let nature of natureassistanceList" [nzLabel]="nature.libelle"
                                             [nzValue]="nature"></nz-option>
                                </nz-select>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Nature financement
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <nz-select nzShowSearch nzAllowClear formControlName="natureFinancement">
                                  <nz-option *ngFor="let nature of naturefinancementList" [nzLabel]="nature.libelle"
                                             [nzValue]="nature"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormRessourceExterieure.get('natureFinancement')?.dirty && validateFormRessourceExterieure.get('natureFinancement')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">

                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Montant de la devise
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <input nz-input type="number" min="0" formControlName="montantRessourceDevise"
                                       class="form-control">

                                <nz-form-explain
                                  *ngIf="validateFormRessourceExterieure.get('montantRessourceDevise')?.dirty && validateFormRessourceExterieure.get('montantRessourceDevise')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Devise
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <nz-select nzShowSearch nzAllowClear formControlName="deviseMonnaie">
                                  <nz-option *ngFor="let devise of devisemonaieList" [nzLabel]="devise.libelle"
                                             [nzValue]="devise"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormRessourceExterieure.get('deviseMonnaie')?.dirty && validateFormRessourceExterieure.get('deviseMonnaie')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Montant programmer (francs CFA)
                                <span class="text-danger">*</span>
                              </h5>
                              <nz-form-control>
                                <input nz-input type="number" min="0" formControlName="montantRessourceProgrammer"
                                       class="form-control">

                                <nz-form-explain
                                  *ngIf="validateFormRessourceExterieure.get('montantRessourceProgrammer')?.dirty && validateFormRessourceExterieure.get('montantRessourceProgrammer')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <br>
                            <button nz-button nzType="primary" (click)="enregistrerRessourceExterieure()"
                                    [disabled]="validateFormRessourceExterieure.invalid">
                              <i class="anticon anticon-plus"> </i> Ajouter
                            </button>
                          </div>
                        </div>

                      </form>
                      <br>

                      <div class="table-responsive">
                        <!-- Alert with rounded corner -->

                        <table class="table table-striped border" style="width: 100%!important;">
                          <thead>
                          <tr>
                            <th>N°</th>
                            <th>P.T.F</th>
                            <th>Montant </th>
                            <th>Devise </th>
                            <th>Nature financement</th>
                            <th>Actions</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr *ngFor="let ressource of ressourceExterieureList let i=index">
                            <td> {{ i+1 }}</td>
                            <td> {{ ressource.ptfBailleurFrs.denominationptf }}</td>
                            <td> {{ formatNumber(ressource.montantRessourceDevise) }}</td>
                            <td> <b>{{' '+ressource.deviseMonnaie.libelle}}</b></td>
                            <td> {{ ressource.natureFinancement.libelle }}</td>
                            <td>
                              <ng-container>
                                <nz-popconfirm [nzTitle]="'Êtes vous sûr de supprimer ?'"
                                               (nzOnConfirm)="supprimerRessource(i, ressource)" [nzOkText]="'Oui'"
                                               [nzCancelText]="'Non'">
                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>
                                </nz-popconfirm>
                              </ng-container>
                            </td>
                          </tr>
                          <tr *ngIf="ressourceExterieureList == null || ressourceExterieureList.length == 0">
                            <td colspan="6" class="text-center">
                              Aucun enregistrement dans la table !
                            </td>
                          </tr>
                          </tbody>
                          <tfoot *ngIf="ressourceExterieureList != null && ressourceExterieureList.length > 0">
                          <tr>
                            <td colspan="2" class="text-center"> TOTAL</td>
                            <td colspan="1"> {{ formatNumber(getTotalMontantRessourceExterieure()) }}</td>
                            <td colspan="3"></td>
                          </tr>
                          </tfoot>
                        </table>
                      </div>

                    </div>
                  </div>

                  <div class="row" *ngIf="current == 4">

                    <div class="col-md-12 col-sm-12">

                      <h5> Les conditions suspensives du projet </h5>
                      <hr>

                      <form class="mt-4" [formGroup]="validateFormConditionSuspensive">

                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Condition
                                  <span class="text-danger">*</span>
                                </h5>
                                <textarea rows="2" nz-input formControlName="libelle"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>

                                <nz-form-explain
                                  *ngIf="validateFormConditionSuspensive.get('libelle')?.dirty && validateFormConditionSuspensive.get('libelle')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>

                            <button nz-button nzType="primary" (click)="enregistrerConditionSuspensive()"
                                    [disabled]="validateFormConditionSuspensive.invalid">
                              <i class="anticon anticon-plus"> </i> Ajouter
                            </button>

                          </div>
                        </div>
                      </form>
                      <br>
                      <div class="table-responsive">
                        <!-- Alert with rounded corner -->

                        <table class="table table-striped border" style="width: 100%!important;">
                          <thead>
                          <tr>
                            <th>N°</th>
                            <th>Conditions suspensives du projet</th>
                            <th>Actions</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr *ngFor="let conditionSus of conditionsuspensiveList let i=index">
                            <td>{{ i+1 }}</td>
                            <td> {{ conditionSus.libelle }}</td>
                            <td>
                              <ng-container>
                                <nz-popconfirm [nzTitle]="'Êtes vous sûr de supprimer ?'"
                                               (nzOnConfirm)="supprimerCondition(i, conditionSus)" [nzOkText]="'Oui'"
                                               [nzCancelText]="'Non'">
                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>
                                </nz-popconfirm>
                              </ng-container>
                            </td>
                          </tr>
                          <tr *ngIf="conditionsuspensiveList == null || conditionsuspensiveList.length == 0">
                            <td colspan="3" class="text-center">
                              Aucun enregistrement dans la table !
                            </td>
                          </tr>
                          </tbody>

                        </table>
                      </div>

                    </div>
                  </div>

                  <div class="row" *ngIf="current == 5">
                    <div class="col-md-12 col-sm-12">

                      <h4 class="card-title">Conditions suspensives du premier décaissement </h4>
                      <hr>
                      <form class="mt-4" nz-form [formGroup]="validateFormConditionSuspensiveDecaissement">

                        <div class="row">
                          <div class="col-md-6 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Condition
                                  <span class="text-danger">*</span>
                                </h5>
                                <textarea rows="2" nz-input formControlName="libelle"
                                          oninput="this.value = this.value.toUpperCase()"></textarea>
                                <nz-form-explain
                                  *ngIf="validateFormConditionSuspensiveDecaissement.get('libelle')?.dirty && validateFormConditionSuspensiveDecaissement.get('libelle')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Etat
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-select nzShowSearch nzAllowClear formControlName="etat">
                                  <nz-option nzLabel="REMPLIE" nzValue="REMPLIE"></nz-option>
                                  <nz-option nzLabel="NON REMPLIE" nzValue="NON REMPLIE"></nz-option>
                                  <nz-option nzLabel="EN COURS" nzValue="EN COURS"></nz-option>
                                  <nz-option nzLabel="PARTIELLEMENT REMPLIE"
                                             nzValue="PAARTIELLEMENT REMPLIE"></nz-option>
                                </nz-select>
                                <nz-form-explain
                                  *ngIf="validateFormConditionSuspensiveDecaissement.get('etat')?.dirty && validateFormConditionSuspensiveDecaissement.get('etat')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <h5> Cliquez ici </h5>
                            <button type="button" class="btn btn-primary btn-sm"
                                    [disabled]="validateFormConditionSuspensiveDecaissement.invalid"
                                    (click)="enregistrerConditionSuspensiveDecaissement()">
                              <i class="ti-plus"></i> Ajouter
                            </button>
                          </div>
                        </div>

                      </form>

                      <div class="table-responsive">
                        <!-- Alert with rounded corner -->
                        <table class="table table-striped border" style="width: 100%!important;">
                          <thead>
                          <tr>
                            <th>N°</th>
                            <th>Conditions suspensives du premier décaissement</th>
                            <th>Etat</th>
                            <th>#</th>
                          </tr>
                          </thead>
                          <tbody>
                          <tr *ngFor="let condition of conditionSuspensiveDecaissementsList let i=index">
                            <td> {{ i + 1 }}</td>
                            <td> {{ condition.libelle }}</td>
                            <td> {{ condition.etat }}</td>
                            <td style="text-align: center;">
                              <ng-container>
                                <nz-popconfirm [nzTitle]="'Êtes vous sûr de supprimer ?'"
                                               (nzOnConfirm)="supprimerConditionSuspensiveDecaissement(condition)"
                                               [nzOkText]="'Oui'" [nzCancelText]="'Non'">
                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>
                                </nz-popconfirm>
                              </ng-container>
                            </td>
                          </tr>
                          <tr
                            *ngIf="conditionSuspensiveDecaissementsList == null || conditionSuspensiveDecaissementsList.length == 0">
                            <td colspan="4" class="text-center">
                              Aucun enregistrement dans la table !
                            </td>
                          </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>

                  <div class="row" *ngIf="current == 6">

                    <div class="col-md-12 col-sm-12">

                      <h5> Localisation du projet</h5>
                      <hr>

                      <form class="mt-4" nz-form [formGroup]="validateFormLocalisation">
                        <div class="row">
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Département </h5>
                              <nz-form-control>
                                <nz-select id="departement" formControlName="departement"
                                           (ngModelChange)="departementChange(validateFormLocalisation.value.departement)">
                                  <nz-option *ngFor="let p of departementList" [nzValue]="p"
                                             [nzLabel]="p.libelle"></nz-option>
                                </nz-select>

                              </nz-form-control>

                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <nz-form-item>
                              <h5> Commune </h5>
                              <nz-form-control>
                                <nz-select id="commune" formControlName="commune"
                                           (ngModelChange)="communeChange(validateFormLocalisation.value.commune)">
                                  <nz-option *ngFor="let c of communeList" [nzValue]="c"
                                             [nzLabel]="c.libelle"></nz-option>
                                </nz-select>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-3 col-sm-12">
                            <!-- <nz-form-item>
                                <h5> Arrondissement </h5>
                                <nz-form-control>
                                    <nz-select id="arrondissement" formControlName="arrondissement">
                                        <nz-option *ngFor="let a of arrondissementList" [nzValue]="a" [nzLabel]="a.libelle">
                                        </nz-option>
                                    </nz-select>
                                </nz-form-control>
                            </nz-form-item> -->

                            <nz-form-item>
                              <h5> Arrondissement </h5>
                              <nz-form-control>
                                <nz-select id="arrondissement" formControlName="arrondissement"
                                           (ngModelChange)="arrondissementChange(validateFormLocalisation.value.arrondissement)">
                                  <nz-option *ngFor="let c of arrondissementList" [nzValue]="c"
                                             [nzLabel]="c.libelle"></nz-option>
                                </nz-select>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                          <div class="col-md-3 col-sm-12">
                            <!-- <nz-form-item>
                                <h5> Localités</h5>
                                <nz-form-control>
                                    <input nz-input id="localite" formControlName="libelle" oninput="this.value = this.value.toUpperCase()">
                                </nz-form-control>

                            </nz-form-item> -->

                            <nz-form-item>
                              <h5> Localités </h5>
                              <nz-form-control>
                                <nz-select nzShowSearch nzAllowClear id="zoneLocalite" formControlName="zoneLocalite">
                                  <nz-option *ngFor="let zoneLocalite of zoneLocaliteList"
                                             [nzLabel]="zoneLocalite.libelle" [nzValue]="zoneLocalite">
                                  </nz-option>
                                </nz-select>
                                <!-- <nz-form-explain *ngIf="validateFormAccord.get('zoneLocalite')?.dirty && validateFormAccord.get('zoneLocalite')?.errors">
                                    Ce champs est obligatoire !
                                </nz-form-explain> -->
                              </nz-form-control>
                            </nz-form-item>

                          </div>
                        </div>

                        <div>
                          <div>
                            <button nz-button nzType="primary" style="margin-right: 8px;"
                                    [disabled]="validateFormLocalisation.invalid" (click)="enregistrerLocalisation()">
                              <i class="anticon anticon-plus"> </i> Ajouter
                            </button>

                          </div>
                          <br>
                        </div>
                      </form>

                      <table class="table table-striped border" style="width: 100%!important;">
                        <thead>
                        <tr>
                          <th>Département</th>
                          <th>Commune</th>
                          <th>Arrondissement</th>
                          <th>Zonne ou localité</th>
                          <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let data of localisationList let i=index">
                          <td> {{data.departement != null ? data.departement.libelle: 'N.A'}}</td>
                          <td> {{data.commune != null ? data.commune.libelle: 'N.A'}}</td>
                          <td> {{data.arrondissement != null ? data.arrondissement.libelle : 'N.A'}}</td>
                          <td> {{data.zoneLocalite != null ? data.zoneLocalite.libelle : 'N.A'}}</td>
                          <td>
                            <div class="editable-row-operations">

                              <ng-container>
                                <nz-popconfirm [nzTitle]="'Êtes vous sûr de supprimer?'"
                                               (nzOnConfirm)="supprimerLocalisation(i, data)" [nzOkText]="'Oui'"
                                               [nzCancelText]="'Non'">

                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>

                                </nz-popconfirm>
                              </ng-container>

                            </div>
                          </td>
                        </tr>
                        <tr *ngIf="localisationList == null || localisationList.length == 0">
                          <td colspan="5" class="text-center">
                            Aucun enregistrement dans la table !
                          </td>
                        </tr>
                        </tbody>
                      </table>

                    </div>
                  </div>

                  <div class="row" *ngIf="current == 7">

                    <div class="col-md-12 col-sm-12">

                      <h5> Gestion des prorogations </h5>
                      <hr>

                      <form class="mt-4" nz-form [formGroup]="validateFormProrogationProjet">
                        <div class="row">
                          <div class="col-md-12 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Motif
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input formControlName="motif" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()">
                                <nz-form-explain
                                  *ngIf="validateFormProrogationProjet.get('motif')?.dirty && validateFormProrogationProjet.get('motif')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>
                        </div>

                        <div class="row">

                          <div class="col-md-4 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date début
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-date-picker formControlName="dateDebut"
                                                (ngModelChange)="makeDateFin()"></nz-date-picker>
                                <nz-form-explain
                                  *ngIf="validateFormProrogationProjet.get('dateDebut')?.dirty && validateFormProrogationProjet.get('dateDebut')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-4 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Nombre de mois
                                  <span class="text-danger">*</span>
                                </h5>
                                <input nz-input type="number" min="0" formControlName="nbreMois" class="form-control"
                                       oninput="this.value = this.value.toUpperCase()"
                                       (keyup)="validateFormProrogationProjet.get('dateDebut').value != null ? makeDateFin() : makeDateDebut()"
                                       (keydown)="validateFormProrogationProjet.get('dateDebut').value != null ? makeDateFin() : makeDateDebut()">
                                <nz-form-explain
                                  *ngIf="validateFormProrogationProjet.get('nbreMois')?.dirty && validateFormProrogationProjet.get('nbreMois')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                          <div class="col-md-4 col-sm-12">
                            <nz-form-item>
                              <nz-form-control>
                                <h5> Date de fin
                                  <span class="text-danger">*</span>
                                </h5>
                                <nz-date-picker formControlName="dateFin"
                                                (ngModelChange)="makeDateDebut()"></nz-date-picker>
                                <nz-form-explain
                                  *ngIf="validateFormProrogationProjet.get('dateFin')?.dirty && validateFormProrogationProjet.get('dateFin')?.errors">
                                  Ce champs est obligatoire !
                                </nz-form-explain>
                              </nz-form-control>
                            </nz-form-item>
                          </div>

                        </div>

                        <div>
                          <div>
                            <button nz-button nzType="danger" style="margin-right: 8px;"
                                    (click)="annulerProrogationProjet()">
                              <i class="anticon anticon-close"> </i> Annuler
                            </button>
                            <button nz-button nzType="primary" style="margin-right: 8px;"
                                    [disabled]="validateFormProrogationProjet.invalid"
                                    (click)="enregistrerProrogationProjet()">
                              Enregistrer
                            </button>

                          </div>
                          <br>
                        </div>
                      </form>

                      <table class="table table-striped border" style="width: 100%!important;">
                        <thead>
                        <tr>
                          <th>Motif</th>
                          <th>Date début</th>
                          <th>Nombre de mois</th>
                          <th>Date de fin</th>
                          <th>Action</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr *ngFor="let prorogationProjet of prorogationProjetSubmit">
                          <td> {{prorogationProjet.motif}}</td>
                          <td> {{prorogationProjet.dateDebut | date: 'dd-MM-yyyy'}}</td>
                          <td> {{prorogationProjet.nbreMois}}</td>
                          <td> {{prorogationProjet.dateFin | date: 'dd-MM-yyyy'}}</td>
                          <td>
                            <div class="editable-row-operations">
                              <ng-container>
                                <button type="button" class="btn btn-success btn-circle  btn-sm"
                                        (click)="modifierProrogationProjet(prorogationProjet)">
                                  <i class="ti-pencil"></i>
                                </button>
                                <nz-popconfirm [nzTitle]="'Êtes-vous sûr de l\'enlever?'"
                                               (nzOnConfirm)="enleverProrogationProjet(prorogationProjet)"
                                               [nzOkText]="'Oui'"
                                               [nzCancelText]="'Non'">

                                  <button type="button" nz-popconfirm class="btn btn-danger btn-circle  btn-sm">
                                    <i class="ti-close"></i>
                                  </button>

                                </nz-popconfirm>
                              </ng-container>

                            </div>
                          </td>
                        </tr>
                        <tr *ngIf="prorogationProjetSubmit == null || prorogationProjetSubmit.length == 0">
                          <td colspan="5" class="text-center">
                            Aucun enregistrement dans la table !
                          </td>
                        </tr>
                        </tbody>
                      </table>

                    </div>
                  </div>

                </div>

                <div class="steps-action" style="padding: 10px;">
                  <button nz-button nzType="default" (click)="returnBackTolIST()" style="margin-right: 10px;">
                    <i nz-icon nzType="arrow-left" nzTheme="outline"></i> Liste des Projets
                  </button>

                  <button nz-button nzType="default" (click)="initialiseFormulaire()" [disabled]="projetSubmit != null &&
                            projetSubmit.id != null && projetSubmit.id > 0">
                    <span>Vider le formulaire</span>
                  </button>

                  <button nz-button nzType="default" (click)="pre()" *ngIf="current > 0">
                    <i nz-icon nzType="arrow-left" nzTheme="outline"></i> <span>Précédent</span>
                  </button>
                  <button nz-button nzType="default" (click)="next()" *ngIf="current < 7"
                          style="margin-left: 10px;">
                    <span>Suivant</span> <i nz-icon nzType="arrow-right" nzTheme="outline"></i>
                  </button>

                  <button nz-button nzType="primary" (click)="done()" *ngIf="current === 7"
                          style="margin-left: 10px;">
                    <i nz-icon type="check"> </i> <span>Enregistrer</span>
                  </button>
                </div>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
